var ScrollOut=function(){"use strict";function e(e,t,n){return t>e?t:n<e?n:e}function t(e){return+(e>0)-+(e<0)}function n(e){return Math.round(1e4*e)/1e4}var r,i={};function o(e){return"-"+e[0].toLowerCase()}function l(e){return i[e]||(i[e]=e.replace(/([A-Z])/g,o))}function c(e,t){return e&&0!==e.length?e.nodeName?[e]:[].slice.call(e[0].nodeName?e:(t||document.documentElement).querySelectorAll(e)):[]}function s(e,t){for(var n in t)n.indexOf("_")&&e.setAttribute("data-"+l(n),t[n])}var f=[];function u(){r=0,f.slice().forEach(function(e){return e()}),a()}function a(){!r&&f.length&&(r=requestAnimationFrame(u))}function d(e,t,n,r){return"function"==typeof e?e(t,n,r):e}function v(){}return function i(o){var u,$,h,g,_=(o=o||{}).onChange||v,p=o.onHidden||v,m=o.onShown||v,X=o.onScroll||v,Y=o.cssProps?(g=o.cssProps,function(e,t){for(var r in t)r.indexOf("_")&&(!0===g||g[r])&&e.style.setProperty("--"+l(r),n(t[r]))}):v,b=o.scrollingElement,w=b?c(b)[0]:window,D=b?c(b)[0]:document.documentElement,E=!1,L={},P=[];function H(){P=c(o.targets||"[data-scroll]",c(o.scope||D)[0]).map(function(e){return{element:e}})}function W(){var n,i=D.clientWidth,l=D.clientHeight,c=t(-u+(u=D.scrollLeft||window.pageXOffset)),s=t(-$+($=D.scrollTop||window.pageYOffset)),v=D.scrollLeft/(D.scrollWidth-i||1),g=D.scrollTop/(D.scrollHeight-l||1);E=E||L.scrollDirX!==c||L.scrollDirY!==s||L.scrollPercentX!==v||L.scrollPercentY!==g,L.scrollDirX=c,L.scrollDirY=s,L.scrollPercentX=v,L.scrollPercentY=g;for(var _=!1,p=0;p<P.length;p++){var m=P[p],X=m.element,Y=X,b=0,H=0;do b+=Y.offsetLeft,H+=Y.offsetTop,Y=Y.offsetParent;while(Y&&Y!==w);var W=X.clientHeight||X.offsetHeight||0,O=X.clientWidth||X.offsetWidth||0,y=(e(b+O,u,u+i)-e(b,u,u+i))/O,A=(e(H+W,$,$+l)-e(H,$,$+l))/W,C=1===y?0:t(b-u),S=1===A?0:t(H-$),T=e((u-(O/2+b-i/2))/(i/2),-1,1),z=e(($-(W/2+H-l/2))/(l/2),-1,1),N=void 0;N=o.offset?d(o.offset,X,m,D)<=$?1:0:(d(o.threshold,X,m,D)||0)<y*A?1:0;var q=m.visible!==N;(m._changed||q||m.visibleX!==y||m.visibleY!==A||m.index!==p||m.elementHeight!==W||m.elementWidth!==O||m.offsetX!==b||m.offsetY!==H||m.intersectX!=m.intersectX||m.intersectY!=m.intersectY||m.viewportX!==T||m.viewportY!==z)&&(_=!0,m._changed=!0,m._visibleChanged=q,m.visible=N,m.elementHeight=W,m.elementWidth=O,m.index=p,m.offsetX=b,m.offsetY=H,m.visibleX=y,m.visibleY=A,m.intersectX=C,m.intersectY=S,m.viewportX=T,m.viewportY=z,m.visible=N)}!h&&(E||_)&&(h=(n=x,f.push(n),a(),function(){!(f=f.filter(function(e){return e!==n})).length&&r&&(cancelAnimationFrame(r),r=0)}))}function x(){O(),E&&(E=!1,s(D,{scrollDirX:L.scrollDirX,scrollDirY:L.scrollDirY}),Y(D,L),X(D,L,P));for(var e=P.length,t=e-1;t>-1;t--){var n=P[t],r=n.element,i=n.visible,l=r.hasAttribute("scrollout-once")||!1;n._changed&&(n._changed=!1,Y(r,n)),n._visibleChanged&&(s(r,{scroll:i?"in":"out"}),_(r,n,D),(i?m:p)(r,n,D)),i&&(o.once||l)&&P.splice(t,1)}}function O(){h&&(h(),h=void 0)}H(),W(),x();var y=0,A=function(){y=y||setTimeout(function(){y=0,W()},0)};return window.addEventListener("resize",A),w.addEventListener("scroll",A),{index:H,update:W,teardown:function(){O(),window.removeEventListener("resize",A),w.removeEventListener("scroll",A)}}}}();