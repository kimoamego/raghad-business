!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Splitting=t()}(this,function(){"use strict";var n=document,t=n.createTextNode.bind(n);function r(n,t,r){n.style.setProperty(t,r)}function e(n,t){return n.appendChild(t)}function i(t,r,i,u){var o=n.createElement("span");return r&&(o.className=r),i&&(u||o.setAttribute("data-"+r,i),o.textContent=i),t&&e(t,o)||o}function u(n,t){return n.getAttribute("data-"+t)}function o(t,r){return t&&0!=t.length?t.nodeName?[t]:[].slice.call(t[0].nodeName?t:(r||n).querySelectorAll(t)):[]}function c(n){for(var t=[];n--;)t[n]=[];return t}function s(n,t){n&&n.some(t)}function a(n){return function(t){return n[t]}}var l={};function f(n,t,r,e){return{by:n,depends:t,key:r,split:e}}function p(n){l[n.by]=n}function d(n,r,u,c,a){n.normalize();var l=[],f=document.createDocumentFragment();c&&l.push(n.previousSibling);var p=[];return o(n.childNodes).some(function(n){if(n.tagName&&!n.hasChildNodes()){p.push(n);return}if(n.childNodes&&n.childNodes.length){p.push(n),l.push.apply(l,d(n,r,u,c,a));return}var e=n.wholeText||"",o=e.trim();o.length&&(" "===e[0]&&p.push(t(" ")),s(o.split(u),function(n,t){t&&a&&p.push(i(f,"whitespace"," ",a));var e=i(f,r,n);l.push(e),p.push(e)})," "===e[e.length-1]&&p.push(t(" ")))}),s(p,function(n){e(f,n)}),n.innerHTML="",e(n,f),l}var h="wordss",m=f(h,0,"wordsss",function(n){return d(n,"word",/\s+/,0,1)}),g="charss",v=f(g,[h],"charsss",function(n,t,r){var e=[];return s(r[h],function(n,r){e.push.apply(e,d(n,"charsss","",t.whitespace&&r))}),e});function y(n){var t=(n=n||{}).key;return o(n.target||"[data-splitting]").map(function(e){var i,o=e["\uD83C\uDF4C"];if(!n.force&&o)return o;o=e["\uD83C\uDF4C"]={el:e};var c=(function n(t,r,e){var i=e.indexOf(t);if(-1==i)e.unshift(t),s(l[t].depends,function(r){n(r,t,e)});else{var u=e.indexOf(0);e.splice(i,1),e.splice(u,0,t)}return e})(i=n.by||u(e,"splitting")||g,0,[]).map(a(l)),f=function n(t,r){for(var e in r)t[e]=r[e];return t}({},n);return s(c,function(n){if(n.split){var i,u,c,a,l,p=n.by,d=(t?"-"+t:"")+n.key,h=n.split(e,f,o);d&&(i=e,u=d,c=h,l=(a="--"+u)+"-index",s(c,function(n,t){Array.isArray(n)?s(n,function(n){r(n,l,t)}):r(n,l,t)}),r(i,a+"-total",c.length)),o[p]=h,e.classList.add(p)}}),e.classList.add("splitting"),o})}function w(n,t,r){var e=o(t.matching||n.children,n),i={};return s(e,function(n){var t=Math.round(n[r]);(i[t]||(i[t]=[])).push(n)}),Object.keys(i).map(Number).sort($).map(a(i))}function $(n,t){return n-t}y.html=function n(t){var r=(t=t||{}).target=i();return r.innerHTML=t.content,y(t),r.outerHTML},y.add=p;var b=f("lines",[h],"line",function(n,t,r){return w(n,{matching:r[h]},"offsetTop")}),N=f("items",0,"item",function(n,t){return o(t.matching||n.children,n)}),x=f("rows",0,"row",function(n,t){return w(n,t,"offsetTop")}),T=f("cols",0,"col",function(n,t){return w(n,t,"offsetLeft")}),L=f("grid",["rows","cols"]),_="layout",k=f(_,0,0,function(n,t){var c=t.rows=+(t.rows||u(n,"rows")||1),s=t.columns=+(t.columns||u(n,"columns")||1);if(t.image=t.image||u(n,"image")||n.currentSrc||n.src,t.image){var a=o("img",n)[0];t.image=a&&(a.currentSrc||a.src)}t.image&&r(n,"background-image","url("+t.image+")");for(var l=c*s,f=[],p=i(0,"cell-grid");l--;){var d=i(p,"cell");i(d,"cell-inner"),f.push(d)}return e(n,p),f}),C=f("cellRows",[_],"row",function(n,t,r){var e=t.rows,i=c(e);return s(r[_],function(n,t,r){i[Math.floor(t/(r.length/e))].push(n)}),i}),S=f("cellColumns",[_],"col",function(n,t,r){var e=t.columns,i=c(e);return s(r[_],function(n,t){i[t%e].push(n)}),i}),A=f("cells",["cellRows","cellColumns"],"cell",function(n,t,r){return r[_]});return p(m),p(v),p(b),p(N),p(x),p(T),p(L),p(k),p(C),p(S),p(A),y});